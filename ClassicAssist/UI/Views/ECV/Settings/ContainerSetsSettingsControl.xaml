<UserControl x:Name="userControl" x:Class="ClassicAssist.UI.Views.ECV.Settings.ContainerSetsSettingsControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:controls="clr-namespace:ClassicAssist.Controls;assembly=ClassicAssist.Controls"
             xmlns:valueConverters="clr-namespace:ClassicAssist.Shared.UI.ValueConverters;assembly=ClassicAssist.Shared"
             xmlns:valueConverters1="clr-namespace:ClassicAssist.UI.Misc.ValueConverters"
             xmlns:dd="urn:gong-wpf-dragdrop"
             mc:Ignorable="d">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../../../../Resources/DarkTheme.xaml" />
                <ResourceDictionary
                    Source="pack://application:,,,/ClassicAssist.Shared;component/Resources/DebugToolBarStyle.xaml" />
                <ResourceDictionary Source="../../ECV/Icons.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <valueConverters:CellWidthValueConverter x:Key="CellWidthValueConverter" />
            <valueConverters1:HexToIntValueConverter x:Key="HexToIntValueConverter" />
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Grid Grid.Column="0" DataContext="{Binding ElementName=userControl, Mode=TwoWay, Path=.}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <ToolBar Grid.Row="0" Margin="0,0,0,5">
                    <ToolBar.Resources>
                        <Style TargetType="{x:Type controls:ImageButton}"
                               BasedOn="{StaticResource {x:Type controls:ImageButton}}">
                            <Setter Property="Margin" Value="0,0,5,0" />
                        </Style>
                    </ToolBar.Resources>
                    <ToolBar.Style>
                        <StaticResource ResourceKey="ToolBarStyle1" />
                    </ToolBar.Style>
                    <controls:ImageButton ImageSource="{StaticResource PlusIcon}" Command="{Binding AddSetCommand}" />
                    <controls:ImageButton ImageSource="{StaticResource RemoveIcon}"
                                          Command="{Binding RemoveSetCommand}"
                                          CommandParameter="{Binding SelectedSet}" />
                </ToolBar>
                <ListBox Grid.Row="1" ItemsSource="{Binding Items}" SelectedItem="{Binding SelectedSet}"
                         dd:DragDrop.IsDragSource="True" dd:DragDrop.IsDropTarget="True">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <controls:EditTextBlock Text="{Binding Name}" ShowIcon="True"
                                                    Width="{Binding ActualWidth, ConverterParameter=10, Converter={StaticResource CellWidthValueConverter}, Mode=OneWay, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListBoxItem}}}" />
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Grid>
        </Grid>
        <Grid Grid.Column="1" DataContext="{Binding ElementName=userControl, Mode=TwoWay, Path=.}" Margin="10,0,0,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <ToolBar Grid.Row="0" Margin="0,0,0,5">
                    <ToolBar.Resources>
                        <Style TargetType="{x:Type controls:ImageButton}"
                               BasedOn="{StaticResource {x:Type controls:ImageButton}}">
                            <Setter Property="Margin" Value="0,0,5,0" />
                        </Style>
                    </ToolBar.Resources>
                    <ToolBar.Style>
                        <StaticResource ResourceKey="ToolBarStyle1" />
                    </ToolBar.Style>
                    <controls:ImageButton ImageSource="{StaticResource CrosshairIcon}"
                                          Command="{Binding AddItemCommand}" />
                    <controls:ImageButton ImageSource="{StaticResource RemoveIcon}"
                                          Command="{Binding RemoveItemCommand}"
                                          CommandParameter="{Binding SelectedItem}" />
                    <controls:ImageButton ImageSource="{StaticResource FindIcon}"
                                          Command="{Binding IdentifyContainersCommand}"
                                          CommandParameter="{Binding SelectedSet.Items}" />
                </ToolBar>
                <ListBox Grid.Row="1" ItemsSource="{Binding SelectedSet.Items}" SelectedItem="{Binding SelectedItem}"
                         MinHeight="100" dd:DragDrop.IsDragSource="True" dd:DragDrop.IsDropTarget="True">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <controls:EditTextBlock
                                Text="{Binding Path=., Mode=TwoWay, Converter={StaticResource HexToIntValueConverter}, StringFormat=0x\{0:x8\}}"
                                ShowIcon="True"
                                Width="{Binding ActualWidth, ConverterParameter=10, Converter={StaticResource CellWidthValueConverter}, Mode=OneWay, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListBoxItem}}}">
                                <controls:EditTextBlock.Buttons>
                                    <controls:ImageButton ImageSource="{StaticResource FindIcon}" BorderThickness="0"
                                                          HorizontalAlignment="Right" Padding="0" Margin="2,0,0,0"
                                                          Command="{Binding IdentifyContainersCommand, ElementName=userControl}"
                                                          CommandParameter="{Binding Path=.}" />
                                </controls:EditTextBlock.Buttons>
                            </controls:EditTextBlock>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Grid>
        </Grid>
    </Grid>
</UserControl>